OfflinePackageInstallation离线软件包安装


虽然整个世界的互联网连接能力一直在持续增长，但是仍然有很多用户使用拨号上网或者根本没有互联网连接。当然，使用aptitude或者新立得(Synaptic)安装软件包非常快速和简单，但是怎么才能在没有互联网连接的情况下安装软件包呢？如果你曾经尝试过，你就能懂得这是多么打击人的一件事情。但是，有少量的应用程序可以简化这样的安装。每个工具都从不同角度解决这一问题，所以你有很多方案可供选择。

Packages.ubuntu.comPackages.ubuntu.com（此处有一个图片）

首先，我们将访问http://packages.ubuntu.com。这个网站主机由Canonical提供，拥有一个持续更新的列表，包含每个主要的Ubuntu软件库中所有可用的软件包和元数据（每个软件包的专用信息）。Ubuntu的所有可用软件包都能通过这个站点找到，最早可追溯到6.06版DapperDrake。你可以通过这个站点查看这些软件包的详细信息，例如依赖性。这使你可以很方便地在另一台计算机上搜索软件包。

举个例子说，我们希望安装Pidgin。我们会首先搜索“pidgin”，然后得到和右面图片相似的页面。通过这个页面，我们能看到依赖关系。现在，我们已经满足这些依赖关系中的哪些了呢？如果你预先已经很清楚从/var/lib/dpkg/status文件中获取信息，你可以通过搜索你目前已经安装的软件包来查看哪些软件包需要，哪些不需要。如果不这样做，你将不得不选择下载所有这些软件包，并且决定是否也需要获取下载的这些软件包的依赖性信息。它们依靠的软件包可能安装了，也可能没有。

不论是否使用status文件，这样在Ubuntu中离线安装搜集需要的软件包，都是一个惊人地耗时的方法。如果你已经知道你所需要的软件包，这对于一次获取一两个软件包是很有帮助的，但是，对于任何大型的软件的安装而言这都是相当困难的，并且试图对这些包进行升级将是一个超人之举。此外，这个方法不能访问第三方软件库，例如medibuntu。

当你收集完毕这些.deb包，你可以将它们拷贝到你的电脑上，依次双击，通过GDebi来安装。这将是安装中的主要部分工作，你需要首先安装它的依赖软件。这不是一个有效的方法，不过至少它能完成任务。


新立得（Synaptic）下载脚本

鉴于手动搜集软件包、软件更新以及它们的依赖关系是一个非常费力的工作，新立得的开发者们构建了使用新立得为离线机器安装软件包的方案。新立得提供了一个下载脚本生成器，它是一个简单且合乎逻辑的方法。

新立得会创建一些简单的bash脚本来下载这些软件包和依赖关系。而你只需要检查一下你希望安装的软件包，然后在菜单中选择“生成下载脚本”即可。这一方法为用户选择需要的软件包提供了图形界面，同时也为下载所有的依赖关系提供了保证。

这对于那些很少上网的用户而言是非常不错的。他们可以很容易地使用第三方的软件库，并且可以像有互联网连接那样完成绝大多数的工作。但是，为了使这一方法能够正确工作，用户必须已经更新离线机器上的软件包列表。新立得和APT依靠这些列表判断哪些依赖软件包需要下载，並确定现在可用的软件包及其版本号。如果你曾经运行过aptgetupdate，你知道这个命令下载的就是这些列表。你可以手动更新更新中的失效链接和依赖关系，但是这是非常痛苦的。

使用脚本来下载这些软件包是非常简单的。在一台有网络的机器上，启动到已经安装了wget（通常都默认安装了）的Linux中，然后从USB设备中运行这个脚本。如果在Windows中，你同样可以使用firefox及DownloadThemAll插件来轻松获取这些文件。这些文件将会下载到你的闪存盘中，你可以使用GDebi来安装这些文件，或者将它们拷贝到/var/cache/apt/archives中，然后使用aptitude或者Synaptic像在线那样来安装这些包。

APTonCD	http://aptoncd.sourceforge.net

APTonCD的目标是提供一个在线包的简单备份，并且将这些备份存放到CD或者DVD。不论是对于普通用户还是系统管理员，这都是一个非常有用的工具。使用APTonCD，可以通过一个图形界面来完成已下载的软件包的备份。当这个备份过程完成后，用户将获得一张光盘，这张光盘可以作为一个本地软件库和APT完美配合。

使用APTonCD，你需要一台连接到互联网的机器，并且与你要安装的离线机器有相同版本的Ubuntu。如果你找不到一台安装了相同版本Ubuntu的机器，你可以使用LiveCD来启动（如果你的计算机有两个光驱），或者使用Unetbootin创建一个USB启动版的LiveCD。不论哪种方式，你都需要相同版本的Ubuntu和一个空闲的CDROM设备来烧制你的APTonCD光盘。APTonCD在Ubuntu通用软件库中（UbuntuUniverserepository），所以，如果这个软件库可以使用，你可以通过新立得或者aptitude安装APTonCD。

一旦你完成了APTonCD的安装，它的使用是很简单的一件事情。这台安装了Ubuntu的机器上所有已经下载的软件包都可以烧录到CD上。在这台机器上简单安装这些软件，然后将他们烧录到CD上以供离线系统安装之用。当你回到你的离线机器上后，只需要插入光盘，它将被检测为一个APT软件库。你现在可以使用新立得或者aptitude通过这张光盘安装这些软件。使用APTonCD，也意味着你有一个所有软件包的物理备份，当你的系统或者硬件出现故障的时候，你可以通过这个物理备份轻松安装，而不需要再重新下载所有东西。

Keryx

Keryxhttp://keryxproject.org

作为一个相对较新的项目，Keryx的目标是提供一个更先进而高效的方法来完成离线软件包的安装。Keryx由一个迅速成长的社区开发，虽然目前仍处于开发的早期阶段，但是它的目标是构建一个简单易用的软件来解决其他离线安装方法中存在的种种问题。

Keryx是专供离线机器使用的软件包管理器，与新立得很相似。但是，于新立得不同的是，它是一个跨平台的软件，并且专为USB设备设计。这是什么意思呢？使用Keryx，你创建一个”工程（project）“，或者说本质上是一个离线机器上已安装软件包的快照。由于面向可移动介质，因而不需要刻录CD，这使得它可以方便地获取新的软件包或者很方便地进行软件更新。它使用图形界面。Keryx是一个通用软件，可以在Linux，Windows和MacOSX等多种平台上使用。

Keryx提供了一些默认项目（本质上是全新安装的快照），Keryx使得你可以使用通用工程来为离线机器下载软件包，而你无需为此专程回家一趟。你可以很容易地在任何一台连接互联网的机器上启动Keryx，加载那些适合于你的离线Ubuntu系统（Karmic32bit，Karmic64bit等）的默认工程，然后开始软件下载。Keryx下载软件包列表，像aptitude和新立得那样读取它们，你也可以使用这些文件来更新你离线机器的可用软件包列表

只需要简单的点击，Keryx就可以下载你离线机器的所有可用更新。软件使用各种颜色的代码来表示它们的状态：是否安装，处于最新版，已安装但是需要更新，或者其他状态。要下载一个应用程序或者一个软件包，你只需要选择这些软件包，点击下载。Keryx将为你计算这些软件包的依赖关系，并且自动帮你下载这些依赖关系。所有这些软件包和列表都存储在你的闪存盘上，因而你可以很轻松的将它们从一台计算机移动到另一台上。它也提供一个工具将可移动设备作为一个本地软件库，你可以通过类似于APTonCD的方式来完成安装。

总结

软件包离线安装並不是像公园散步那样可有可无，大量的用户仍然没有互联网连接，但是这里很多好用而又有前途的工具来帮助这些用户。作为最原始的方法，packages.ubuntu.com是一个偶尔获取一两个软件包的快速方法。新立得下载脚本对于那些有限制连接的用户来说是一个不错的办法。而APTonCD为备份已下载软件包以供以后使用提供了一条捷径。Keryx可以缓解其他方法的开销，而且显示出很好的发展前景。选择什么样的工具取决于个人的需要。有些人可能只偶尔需要很少的包，有些人可能需要永久的备份，而另一人可能发现使用闪存盘是最好的方法。每种方法都试验一下，看看哪一个（或哪几个）方法最适合你的需要，将你的想法和主意回馈给社区。
